(function(d){var w=/^.*\.(ogg|oga|aac|mp3|wav)($|\?)/,x=/^.*\.(ogg|oga|aac|mp3|wav|ogg|ogv|mp4|webm)($|\?)/;d.player=function(c,b){if(!d[c]){b=b||{};var f=function(c,f,e){e=e||{};var h=new Date/1E3,m=h,l=0,u=0,q=1,r=!1,k={},g="string"===typeof c?d.dom.find(c):c,a={};Object.prototype.__defineGetter__||(a=g||document.createElement("div"));for(var j in g)j in a||("object"===typeof g[j]?a[j]=g[j]:"function"===typeof g[j]?a[j]=function(a){return"length"in g[a]&&!g[a].call?g[a]:function(){return g[a].apply(g,
arguments)}}(j):d.player.defineProperty(a,j,{get:function(a){return function(){return g[a]}}(j),set:d.nop,configurable:!0}));var v=function(){h=new Date/1E3;a.paused||(a.currentTime+=h-m,a.dispatchEvent("timeupdate"),setTimeout(v,10));m=h};a.play=function(){this.paused=!1;4<=a.readyState&&(m=new Date/1E3,a.dispatchEvent("play"),v())};a.pause=function(){this.paused=!0;a.dispatchEvent("pause")};d.player.defineProperty(a,"currentTime",{get:function(){return l},set:function(b){l=+b;a.dispatchEvent("timeupdate");
return l},configurable:!0});d.player.defineProperty(a,"volume",{get:function(){return q},set:function(b){q=+b;a.dispatchEvent("volumechange");return q},configurable:!0});d.player.defineProperty(a,"muted",{get:function(){return r},set:function(b){r=+b;a.dispatchEvent("volumechange");return r},configurable:!0});d.player.defineProperty(a,"readyState",{get:function(){return u},set:function(a){return u=a},configurable:!0});a.addEventListener=function(a,b){k[a]||(k[a]=[]);k[a].push(b);return b};a.removeEventListener=
function(a,b){var c,d=k[a];if(d){for(c=k[a].length-1;0<=c;c--)b===d[c]&&d.splice(c,1);return b}};a.dispatchEvent=function(a){var b,c=a.type;if(!c&&(c=a,a=d.events.getInterface(c)))b=document.createEvent(a),b.initEvent(c,!0,!0,window,1);if(k[c])for(a=k[c].length-1;0<=a;a--)k[c][a].call(this,b,this)};a.src=f||"";a.duration=0;a.paused=!0;a.ended=0;e&&e.events&&d.forEach(e.events,function(b,c){a.addEventListener(c,b,!1)});!1!==b._canPlayType(g.nodeName,f)?b._setup?b._setup.call(a,e):(a.readyState=4,a.dispatchEvent("loadedmetadata"),
a.dispatchEvent("loadeddata"),a.dispatchEvent("canplaythrough")):setTimeout(function(){a.dispatchEvent("error")},0);c=new d.p.init(a,e);if(b._teardown){var s=c.destroy,t=function(){b._teardown.call(a,e)},s=s||d.nop,t=t||d.nop;c.destroy=function(){s.apply(this,arguments);t.apply(this,arguments)}}return c};f.canPlayType=b._canPlayType=b._canPlayType||d.nop;d[c]=d.player.registry[c]=f}};d.player.registry={};d.player.defineProperty=Object.defineProperty||function(c,b,f){c.__defineGetter__(b,f.get||d.nop);
c.__defineSetter__(b,f.set||d.nop)};d.player.playerQueue=function(){var c=[],b=!1;return{next:function(){b=!1;c.shift();c[0]&&c[0]()},add:function(d){c.push(function(){b=!0;d&&d()});!b&&c[0]()}}};d.smart=function(c,b,f){var n=["AUDIO","VIDEO"],p,e=d.dom.find(c),h;p=document.createElement("video");var m={ogg:"video/ogg",ogv:"video/ogg",oga:"audio/ogg",webm:"video/webm",mp4:"video/mp4",mp3:"audio/mp3"};if(e){if(-1<n.indexOf(e.nodeName)&&!b)return"object"===typeof b&&(f=b),d(e,f);"string"===typeof b&&
(b=[b]);c=0;for(srcLength=b.length;c<srcLength;c++){h=x.exec(b[c]);h=!h||!h[1]?!1:p.canPlayType(m[h[1]]);if(h){b=b[c];break}for(var l in d.player.registry)if(d.player.registry.hasOwnProperty(l)&&d.player.registry[l].canPlayType(e.nodeName,b[c]))return d[l](e,b[c],f)}-1===n.indexOf(e.nodeName)&&(p="string"===typeof b?b:b.length?b[0]:b,c=document.createElement(w.exec(p)?n[0]:n[1]),c.controls=!0,e.appendChild(c),e=c);f&&f.events&&f.events.error&&e.addEventListener("error",f.events.error,!1);e.src=b;
return d(e,f)}d.error("Specified target "+c+" was not found.")}})(Popcorn);